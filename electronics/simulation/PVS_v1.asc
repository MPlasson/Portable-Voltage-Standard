Version 4
SHEET 1 3332 1860
WIRE 2352 -288 2352 -304
WIRE 2720 -208 2704 -208
WIRE 2816 -208 2800 -208
WIRE 2352 -192 2352 -208
WIRE 2416 -192 2352 -192
WIRE 2512 -192 2496 -192
WIRE 1584 -144 1584 -176
WIRE 1744 -144 1584 -144
WIRE 1776 -144 1744 -144
WIRE 2576 -128 2576 -144
WIRE 2880 -128 2880 -160
WIRE 2880 -128 2576 -128
WIRE 2944 -128 2880 -128
WIRE 3056 -128 3024 -128
WIRE 3120 -128 3056 -128
WIRE 3264 -128 3120 -128
WIRE 3056 -112 3056 -128
WIRE 1744 -96 1744 -144
WIRE 2352 -96 2352 -192
WIRE 1200 -80 1200 -144
WIRE 1584 -64 1584 -144
WIRE 1840 -48 1840 -96
WIRE 1840 -48 1808 -48
WIRE 2288 -48 1840 -48
WIRE 1296 -32 1296 -64
WIRE 1296 -32 1264 -32
WIRE 1840 -32 1840 -48
WIRE -48 -16 -48 -48
WIRE 144 -16 144 -48
WIRE 1296 0 1296 -32
WIRE 48 32 16 32
WIRE 80 32 48 32
WIRE -864 48 -896 48
WIRE 1200 48 1200 16
WIRE 1200 48 1168 48
WIRE -1472 64 -1520 64
WIRE -640 64 -736 64
WIRE -592 64 -640 64
WIRE 1040 64 800 64
WIRE -1232 80 -1232 64
WIRE -1232 80 -1344 80
WIRE -1216 80 -1232 80
WIRE -1104 80 -1136 80
WIRE -1072 80 -1104 80
WIRE -912 80 -992 80
WIRE -864 80 -912 80
WIRE 1296 80 1296 64
WIRE 1296 80 1168 80
WIRE 1584 80 1584 0
WIRE 1584 80 1296 80
WIRE 1632 80 1584 80
WIRE 1744 80 1744 0
WIRE 1744 80 1712 80
WIRE 1840 80 1840 48
WIRE 1840 80 1744 80
WIRE 2000 80 1840 80
WIRE 2352 80 2352 0
WIRE 2352 80 2000 80
WIRE -1472 96 -1904 96
WIRE 1040 96 960 96
WIRE 1296 96 1296 80
WIRE -48 112 -48 80
WIRE 48 112 48 32
WIRE 48 112 -48 112
WIRE 144 112 144 80
WIRE 224 112 144 112
WIRE 1200 112 1168 112
WIRE 1840 112 1840 80
WIRE -1104 128 -1104 80
WIRE -1904 144 -1904 96
WIRE 144 144 144 112
WIRE 1200 144 1200 112
WIRE 1584 160 1584 80
WIRE 1744 160 1744 80
WIRE 2352 160 2352 80
WIRE -912 192 -912 80
WIRE -896 192 -912 192
WIRE -816 192 -832 192
WIRE -640 192 -640 64
WIRE -640 192 -736 192
WIRE -48 192 -48 112
WIRE 1296 192 1296 160
WIRE 1296 192 1264 192
WIRE -1104 208 -1104 192
WIRE 1840 208 1840 192
WIRE 1840 208 1808 208
WIRE 2288 208 1840 208
WIRE -1520 224 -1520 64
WIRE -1472 224 -1520 224
WIRE -1392 224 -1408 224
WIRE -1280 224 -1312 224
WIRE 1296 224 1296 192
WIRE 1840 256 1840 208
WIRE 1200 304 1200 240
WIRE 1584 304 1584 224
WIRE 1744 304 1744 256
WIRE 1744 304 1584 304
WIRE 1776 304 1744 304
WIRE -48 320 -48 288
WIRE -1520 336 -1520 224
WIRE -1440 336 -1520 336
WIRE -1280 336 -1280 224
WIRE -1280 336 -1360 336
WIRE -1248 336 -1280 336
WIRE 1584 336 1584 304
WIRE -1520 368 -1520 336
WIRE 2704 368 2704 -208
WIRE -48 416 -48 400
WIRE 2352 416 2352 256
WIRE 2480 416 2352 416
WIRE 2640 416 2560 416
WIRE 2352 448 2352 416
WIRE 2704 528 2704 464
WIRE 960 736 960 96
WIRE 2000 736 2000 80
WIRE 2000 736 960 736
WIRE 2288 736 2000 736
WIRE 2336 736 2288 736
WIRE 2288 752 2288 736
WIRE 2288 848 2288 832
WIRE -1152 1104 -1168 1104
WIRE -1056 1104 -1072 1104
WIRE -1552 1120 -1552 1088
WIRE -1520 1120 -1552 1120
WIRE -1424 1120 -1440 1120
WIRE -1552 1184 -1552 1120
WIRE -1360 1184 -1360 1168
WIRE -992 1184 -992 1152
WIRE -992 1184 -1360 1184
WIRE -928 1184 -992 1184
WIRE -816 1184 -848 1184
WIRE -752 1184 -816 1184
WIRE -672 1184 -752 1184
WIRE 64 1184 64 1136
WIRE 256 1184 64 1184
WIRE 384 1184 256 1184
WIRE 448 1184 384 1184
WIRE 512 1184 448 1184
WIRE 592 1184 512 1184
WIRE -816 1200 -816 1184
WIRE 384 1200 384 1184
WIRE 448 1200 448 1184
WIRE -1632 1232 -1712 1232
WIRE -1616 1232 -1632 1232
WIRE 64 1232 64 1184
WIRE -1632 1248 -1632 1232
WIRE -16 1280 -96 1280
WIRE 0 1280 -16 1280
WIRE -16 1296 -16 1280
WIRE 256 1344 256 1184
WIRE -1360 1392 -1360 1376
WIRE -1600 1440 -1616 1440
WIRE -1440 1440 -1440 1424
WIRE -1440 1440 -1520 1440
WIRE -1424 1440 -1440 1440
WIRE -1168 1472 -1168 1104
WIRE 64 1472 64 1456
WIRE -1360 1520 -1360 1488
WIRE -1328 1520 -1360 1520
WIRE -1232 1520 -1248 1520
WIRE -176 1520 -192 1520
WIRE -16 1520 -16 1504
WIRE -16 1520 -96 1520
WIRE 0 1520 -16 1520
WIRE -1360 1552 -1360 1520
WIRE 256 1552 256 1424
WIRE 64 1600 64 1568
WIRE 96 1600 64 1600
WIRE 192 1600 176 1600
WIRE -1168 1632 -1168 1568
WIRE 64 1632 64 1600
WIRE -1360 1648 -1360 1632
WIRE 256 1712 256 1648
WIRE 64 1728 64 1712
FLAG -1904 224 0
FLAG -2208 208 0
FLAG -2112 208 0
FLAG -2208 128 VCC
FLAG -2112 128 VEE
FLAG 1584 -256 VCC
FLAG 1840 -192 VCC
FLAG 1584 416 VEE
FLAG 1840 352 VEE
FLAG -2208 432 0
FLAG -2112 432 0
FLAG -2208 352 VCC_15
FLAG -2112 352 VEE_15
FLAG -1344 48 VCC_15
FLAG -1344 112 VEE_15
FLAG -1520 448 0
FLAG 2336 736 main_output
FLAG 2288 848 0
FLAG -1248 336 main_output
FLAG -1104 208 0
FLAG 2352 -304 VCC
FLAG 2576 -240 VCC
FLAG 3120 -48 0
FLAG 3264 -128 OC
FLAG 2352 528 VEE
FLAG 2704 528 VEE
FLAG 2880 -256 VCC
FLAG 3056 -48 0
FLAG -896 48 0
FLAG -736 32 VCC_15
FLAG -736 96 VEE_15
FLAG 1296 -144 VCC
FLAG 1200 -144 VCC
FLAG 1296 304 VEE
FLAG 1200 304 VEE
FLAG -592 64 int_out
FLAG 800 64 gain_out
FLAG 144 224 VEE
FLAG -48 -128 VCC
FLAG 144 -128 VCC
FLAG -192 240 int_out
FLAG 224 112 gain_out
FLAG -48 416 VEE_15
FLAG -1360 1376 0
FLAG -1360 1648 VEE_15
FLAG -1168 1632 VEE_15
FLAG -1360 1072 VCC
FLAG -992 1056 VCC
FLAG -1232 64 servo
FLAG -1616 1440 servo
FLAG -1792 1232 servo
FLAG -1552 1280 0
FLAG -1552 1008 VCC
FLAG -672 1184 nSTAB
FLAG -816 1264 0
FLAG -1632 1312 0
FLAG -1440 1360 0
FLAG -752 1264 0
FLAG 64 1456 0
FLAG 64 1728 VEE_15
FLAG 256 1712 VEE_15
FLAG -192 1520 servo
FLAG -176 1280 servo
FLAG 64 1328 0
FLAG 64 1056 VCC
FLAG 592 1184 STAB
FLAG 448 1264 0
FLAG -16 1360 0
FLAG -16 1440 0
FLAG 512 1264 0
FLAG 384 1264 0
SYMBOL voltage -1904 128 R0
WINDOW 3 -63 137 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(-2.5 2.5 20m 1u 1u 100m 1)
SYMATTR InstName Vdac
SYMBOL OPAx196 -1408 80 R0
SYMATTR InstName U1
SYMBOL npn 1776 -192 R0
SYMATTR InstName Q1
SYMATTR Value 2SCR583D3
SYMBOL pnp 1776 352 M180
SYMATTR InstName Q2
SYMATTR Value 2SAR583D3
SYMBOL res 1568 -272 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 1568 320 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL voltage -2112 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value -30
SYMBOL voltage -2208 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value +30
SYMBOL voltage -2112 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -15
SYMBOL voltage -2208 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value +15
SYMBOL res -1344 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 9k
SYMBOL res -1504 464 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 1824 -48 R0
SYMATTR InstName R5
SYMATTR Value 5
SYMBOL npn 1808 -96 M0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL diode 1568 -64 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode 1568 160 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res 1824 96 R0
SYMATTR InstName R7
SYMATTR Value 5
SYMBOL pnp 1808 256 R180
SYMATTR InstName Q4
SYMATTR Value 2N3906
SYMBOL res 1616 96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res 2272 736 R0
SYMATTR InstName R8
SYMATTR Value 250
SYMBOL OPAx196 -800 64 R0
SYMATTR InstName U2
SYMBOL cap -832 176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL res -976 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 500k
SYMBOL res -720 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL cap -1408 208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 22n
SYMBOL res -1296 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 470
SYMBOL res -1120 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 500k
SYMBOL cap -1120 128 R0
SYMATTR InstName C3
SYMATTR Value 100p
SYMBOL npn 2288 -96 R0
SYMATTR InstName Q5
SYMATTR Value 2N3904
SYMBOL res 2336 -304 R0
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL pnp 2512 -144 M180
SYMATTR InstName Q6
SYMATTR Value 2N3906
SYMBOL res 2512 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL res 3104 -144 R0
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 3040 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 47k
SYMBOL pnp 2288 256 M180
SYMATTR InstName Q7
SYMATTR Value 2N3906
SYMBOL res 2336 432 R0
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL res 2576 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL npn 2640 368 R0
SYMATTR InstName Q8
SYMATTR Value 2N3904
SYMBOL pnp 2816 -160 M180
SYMATTR InstName Q9
SYMATTR Value 2N3906
SYMBOL res 2816 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 47k
SYMBOL cap 3040 -112 R0
SYMATTR InstName C5
SYMATTR Value 1n
SYMBOL OPAx196 1104 80 R0
SYMATTR InstName U3
SYMBOL res 1280 -160 R0
SYMATTR InstName R20
SYMATTR Value 10k
SYMBOL npn 1264 -80 M0
SYMATTR InstName Q10
SYMATTR Value 2N3904
SYMBOL pnp 1264 240 R180
SYMATTR InstName Q11
SYMATTR Value 2N3906
SYMBOL zener 1280 64 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value BZX84C15L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL zener 1280 160 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value BZX84C15L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 1280 320 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R22
SYMATTR Value 10k
SYMBOL npn -112 192 R0
SYMATTR InstName Q15
SYMATTR Value 2N3904
SYMBOL res -96 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 10k
SYMBOL res -64 304 R0
SYMATTR InstName R28
SYMATTR Value 10k
SYMBOL pnp 16 80 R180
SYMATTR InstName Q16
SYMATTR Value 2N3906
SYMBOL pnp 80 80 M180
SYMATTR InstName Q17
SYMATTR Value 2N3906
SYMBOL res -64 -144 R0
SYMATTR InstName R29
SYMATTR Value 390
SYMBOL res 128 -144 R0
SYMATTR InstName R30
SYMATTR Value 10k
SYMBOL res 128 128 R0
SYMATTR InstName R31
SYMATTR Value 470k
SYMBOL pnp -1424 1488 M180
SYMATTR InstName Q12
SYMATTR Value 2N3906
SYMBOL res -1504 1424 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 10k
SYMBOL res -1376 1536 R0
SYMATTR InstName R23
SYMATTR Value 10k
SYMBOL res -1232 1504 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 1k
SYMBOL npn -1232 1472 R0
SYMATTR InstName Q13
SYMATTR Value 2N3904
SYMBOL pnp -1424 1168 M180
SYMATTR InstName Q14
SYMATTR Value 2N3906
SYMBOL res -1424 1104 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 1k
SYMBOL pnp -1056 1152 M180
SYMATTR InstName Q18
SYMATTR Value 2N3906
SYMBOL res -1056 1088 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 47k
SYMBOL res -1696 1216 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R33
SYMATTR Value 10k
SYMBOL npn -1616 1184 R0
SYMATTR InstName Q19
SYMATTR Value 2N3904
SYMBOL res -1568 992 R0
SYMATTR InstName R34
SYMATTR Value 10k
SYMBOL res -832 1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R35
SYMATTR Value 47k
SYMBOL cap -832 1200 R0
SYMATTR InstName C4
SYMATTR Value 10n
SYMBOL diode -1616 1312 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMBOL diode -1424 1424 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL res -768 1280 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R36
SYMATTR Value 10k
SYMBOL pnp 0 1568 M180
SYMATTR InstName Q20
SYMATTR Value 2N3906
SYMBOL res -80 1504 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 10k
SYMBOL res 48 1616 R0
SYMATTR InstName R37
SYMATTR Value 10k
SYMBOL res 192 1584 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value 1k
SYMBOL npn 192 1552 R0
SYMATTR InstName Q21
SYMATTR Value 2N3904
SYMBOL res -80 1264 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R41
SYMATTR Value 10k
SYMBOL npn 0 1232 R0
SYMATTR InstName Q24
SYMATTR Value 2N3904
SYMBOL res 48 1040 R0
SYMATTR InstName R42
SYMATTR Value 47k
SYMBOL cap 432 1200 R0
SYMATTR InstName C6
SYMATTR Value 10n
SYMBOL diode 0 1360 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 0 1504 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL res 496 1280 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R44
SYMATTR Value 10k
SYMBOL schottky 400 1264 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D9
SYMATTR Value 1N5817
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 240 1328 R0
SYMATTR InstName R39
SYMATTR Value 10k
TEXT -2240 536 Left 2 !.tran 200m startup uic
TEXT 2504 -408 Left 2 ;Overcurrent detection circuit
TEXT 1632 -360 Left 2 ;High power buffer
TEXT 1104 -256 Left 2 ;Bootstrapped opamp
TEXT -896 -88 Left 2 ;Slope control
TEXT -1480 -64 Left 2 ;DC servo
TEXT -32 -288 Left 2 ;DC amplifier
TEXT -1320 904 Left 2 ;Stability detection circuit (inverted)
TEXT 104 952 Left 2 ;Stability detection circuit (non-inverted)
